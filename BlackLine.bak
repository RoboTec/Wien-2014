/* BlackLine */

#include "functions.h"

task main()
{    InitSensors();
     StartTiming();
     GreenAttempts = 0;
     DownFloor = true;
     while(true)
     {
                     gemachteSchleifenaufgaben=0;
                     SpeedLeft = SpeedNorm;
                     SpeedRight = SpeedNorm;
                     CheckGreen();
                     time = ReturnTime();
                      if(SENSOR_2 < Schwarzwert)
                     {
                              TurnRight();
                     }
                     if((SENSOR_3 < Schwarzwert) && (ReturnSensorTime() > greenTime))
                     {
                              TurnLeft();
                     }
                     if((time > 800) && (ReturnSensorTime() > greenTime))
                     {
                              if(DirectionRight == false)
                              {
                                  SpeedLeft = 60;
                                  SpeedRight = 20;
                              }
                              else
                              {
                                  SpeedLeft = 20;
                                  SpeedRight = 60;
                              }
                     }
                     if(gemachteSchleifenaufgaben > 1)
                     {
                              GreenAndWinkel();
                     }
                     OnFwd(OUT_B, SpeedLeft);
                     OnFwd(OUT_C, SpeedRight);
                     Wait(10);
                     Off(OUT_BC);
                     //Ultraschall-Test
                     distance = smuxSensorLegoUS(msensor_S1_1);
                     TextOut(0, LCD_LINE2, "DISTANCE:", true);
                     NumOut(0, LCD_LINE3, distance);
     }
}



